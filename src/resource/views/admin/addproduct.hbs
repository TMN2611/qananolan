
{{>admin-header}}
<form>
  <div class="form-group">
    <label for="productName">TÃªn sáº£n pháº©m</label>
    <input type="text" class="form-control" id="productName" name='productName' placeholder="Vui lÃ²ng nháº­p" required>
  </div>
  <div class="form-group">
    <label for="productPrice">GiÃ¡ sáº£n pháº©m</label>
    <input type="number" class="form-control" id="productPrice" name='productPrice' placeholder="Vui lÃ²ng nháº­p" required>
  </div>

  <div class="form-group">
    <label for="sale">Giáº£m giÃ¡ bao nhiÃªu pháº§n trÄƒm</label>
    <p class='priceSale'></p>
    <input type="number" class="form-control" id="sale" name='sale' placeholder="Pháº§n trÄƒm giáº£m giÃ¡" min='0' max='100' required>
  </div>
  
  <div class="form-group">
    <label for="productDescription">MÃ´ táº£ sáº£n pháº©m</label>
    <textarea  type="text"  class="form-control" id="productDescription" name='productDescription' placeholder="Má»—i mÃ´ táº£ má»™t dÃ²ng" rows="10" cols="50" required></textarea>
  </div>

  

   <div class="form-group">
    <label for="productColor">MÃ u sáº¯c</label>
    <input type="text" class="form-control" id="productColor" name='productColor' placeholder="Vui lÃ²ng nháº­p" required>
  </div>

<p>Giá»›i tÃ­nh</p>
<div class="d-flex">
    <div class="form-group p-3">
        <label for="productGenderMale">Nam</label>
        <input type="radio" class="form-control" id="productGenderMale" name='productGender' placeholder="MÃ u sáº¯c" value='Male' required>
    </div>
    <div class="form-group p-3">
        <label for="productGenderFemale">Ná»¯</label>
        <input type="radio" class="form-control" id="productGenderFemale" name='productGender' placeholder="MÃ u sáº¯c" value='Female'>
    </div>
    <div class="form-group p-3">
        <label for="productGenderUnisex">Unisex</label>
        <input type="radio" class="form-control" id="productGenderUnisex" name='productGender' placeholder="MÃ u sáº¯c" value='Unisex'>
    </div>
</div>

<p>LÃ  sáº£n pháº©m Ä‘áº·c biá»‡t</p>

<div class="d-flex">
    <div class="form-group p-3">
        <label for="specialIsTrue">CÃ³</label>
        <input type="radio" class="form-control" id="specialIsTrue" name='isSpecial'  value='true' required>
    </div>
    <div class="form-group p-3">
        <label for="specialIsFalse">KhÃ´ng</label>
        <input type="radio" class="form-control" id="specialIsFalse" name='isSpecial'  value='false'>
    </div>
    
</div>

<p>Sáº£n pháº©m cáº§n Order trÆ°á»›c ?</p>

<div class="d-flex">
    <div class="form-group p-3">
        <label for="preOrderIsTrue">CÃ³</label>
        <input type="radio" class="form-control" id="preOrderIsTrue" name='isPreOrder'  value='true' required>
    </div>
    <div class="form-group p-3">
        <label for="preOrderIsFalse">KhÃ´ng</label>
        <input type="radio" class="form-control" id="preOrderIsFalse" name='isPreOrder'  value='false'>
    </div>
    
</div>



  <div class="form-group">
    <label for="productSize">Nháº­p size sáº£n pháº©m</label>
    <input  type="text"  class="form-control" id="productSize" name='productSize' placeholder="Sá»­ dá»¥ng khoáº£ng trá»‘ng giá»¯a cÃ¡c size VD: 35 36 37" value='36 37 38 39 40 41 42 43' required>
  </div>


  
  <div class="form-group">
    <label for="files">Nháº­p áº£nh/ video(KhÃ´ng báº¯t buá»™c):</label>
      <input type="file" name="file" id="files" multiple class='form-control' required> 

  </div>
  <div class="form-group">
    <label for="weight">CÃ¢n náº·ng</label>
      <input type="number" name="weight" id="weight" class='form-control' required>
  </div>
  <div class="form-group">
    <label for="quantitySold:">LÆ°á»£ng bÃ¡n</label>
      <input type="text" name="quantitySold" id="quantitySold" class='form-control' required>
  </div>

  <div class="form-group">
    <label for="form-select-brand">ThÆ°Æ¡ng hiá»‡u</label>

    <select class="form-select-brand" aria-label="Default select example">
        
    </select>
  </div>
  
  

  <button type="submit" class="btn btn-primary">ThÃªm sáº£n pháº©m</button>
</form>
{{!-- Show brand --}}
<script>
  const formSelectBrand = document.querySelector('.form-select-brand');
   fetch(`/apis/brand-list`, {
        method: 'GET',
    })
    .then(res => res.json())
    .then(data =>  {
        const html = data.map(el => {
          return `<option value="${el.brandName}">${el.brandName}</option>`
        });
        formSelectBrand.innerHTML = html.join('');
    });
</script>

{{!-- Check giÃ¡ sau khi nháº­p pháº§n trÄƒm giáº£m giÃ¡ --}}
<script>
      const productPriceElement = document.querySelector('#productPrice');
      const priceSaleElement = document.querySelector('.priceSale');
      const saleElement = document.querySelector('#sale');

      function updateSalePrice () {
          const salePrice = Number(productPriceElement.value) - (Number(productPriceElement.value) * saleElement.value ) / 100;
          console.log("ðŸš€ ~ file: addproduct.hbs:114 ~ saleElement.addEventListener ~ salePrice:", salePrice)
          
          priceSaleElement.innerHTML = `${salePrice} VND`
      }
      saleElement.addEventListener('input', function() {

         updateSalePrice()
        
      })
      productPriceElement.addEventListener('input', function() {

         updateSalePrice()
        
      })

</script>


<script>
const form = document.querySelector('form');
form.addEventListener('submit', (e) => {
    
    e.preventDefault();
    // Prevents HTML handling submission
    const productGender = document.querySelector('input[name="productGender"]:checked')?.value || 'Unisex';
    const isSpecial = document.querySelector('input[name="isSpecial"]:checked')?.value;
    const isPreOrder = document.querySelector('input[name="isPreOrder"]:checked')?.value;
    const productName = document.querySelector('input[name="productName"]');
    const productPrice = document.querySelector('input[name="productPrice"]');
    const productDescription = document.querySelector('textarea[name="productDescription"]');
    const sale = document.querySelector('input[name="sale"]');
    const productColor = document.querySelector('input[name="productColor"]');
    const productSize = document.querySelector('input[name="productSize"]');
    const files = document.getElementById("files");
    const brand = document.querySelector('.form-select-brand');
    const weight = document.querySelector('input[name="weight"]');
    const quantitySold = document.querySelector('input[name="quantitySold"]');
    const formData = new FormData();
     
    formData.append('productGender',productGender);
    formData.append('isSpecial',isSpecial);
    formData.append('isPreOrder',isPreOrder);
    formData.append('productName',productName.value);
    formData.append('productPrice',productPrice.value);
    formData.append('productDescription',productDescription.value);
    formData.append('sale',sale.value);
    formData.append('productColor',productColor.value);
    formData.append('productSize',productSize.value);
    formData.append('brand',brand.value);
    formData.append('weight',weight.value);
    formData.append('quantitySold',quantitySold.value);

    // Creates empty formData object

    // Appends value of text input
    for(let i =0; i < files.files.length; i++) {
        formData.append("files", files.files[i]);
    }


    // Appends value(s) of file input
    // Post data to Node and Express server:
    const token = JSON.parse(sessionStorage.getItem('admin-token'));

    fetch(`/admin/them-san-pham/${token}`, {
        method: 'POST',
        body: formData, // Payload is formData object
    })
    .then(res => res.json())
    .then(data => console.log(data));
})
</script>

{{>admin-footer}}


